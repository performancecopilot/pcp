<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<!--
    pmlogger Health Check Service

    This is NOT a long-running daemon. It's a periodic health-check that:
    1. Runs at boot (RunAtLoad) and every 10 minutes (StartInterval)
    2. Spawns pmlogger processes if they're not running
    3. Verifies they're healthy, then exits

    Linux equivalent: pmlogger_check.timer + pmlogger_check.service (systemd)

    To reduce crash recovery time, decrease StartInterval (seconds).
    Minimum recommended: 60 (1 minute). Default: 600 (10 minutes).
-->
<plist version="1.0">
    <dict>
        <key>Label</key>
        <string>io.pcp.pmlogger</string>
        <key>ProgramArguments</key>
        <array>
            <string>/etc/init.d/pmlogger</string>
            <string>start</string>
        </array>
        <key>Disabled</key>
        <false/>
        <key>UserName</key>
        <string>root</string>
        <key>UserGroup</key>
        <string>wheel</string>
        <key>KeepAlive</key>
        <false/>
        <key>ThrottleInterval</key>
        <integer>30</integer>
        <key>RunAtLoad</key>
        <true/>
        <key>StartInterval</key>
        <integer>600</integer>
        <key>StandardErrorPath</key>
        <string>/var/log/pcp/pmlogger/plist.stderr</string>
        <key>StandardOutPath</key>
        <string>/var/log/pcp/pmlogger/plist.stdout</string>
    </dict>
</plist>
