QA output created by 1543

*****   GET /pmapi/context   *****

== Check default context creation ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
== Check hostname parameter ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
== Check hostspec parameter ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
== Pinging active context via URL ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
Context ping success
== Check polltimeout parameters ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
== Pinging now-expired context via URL ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
Context successfully expired
== Pinging now-expired context via parameter ==
{
    "context": "CONTEXT"
    "source": "SOURCE"
    "hostname": "HOSTNAME"
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    }
}
Context successfully expired

*****   GET /pmapi/metric   *****

== metric name (single) ==
{
    "context": "CONTEXT"
    "metrics": [
        {
            "name": "sample.long.ten",
            "series": "SERIES"
            "pmid": "29.0.11",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "10 as a 32-bit integer",
            "text-help": "10 as a 32-bit integer"
        }
    ]
}
Series checked (single)
== metric name (indom) ==
{
    "context": "CONTEXT"
    "metrics": [
        {
            "name": "sample.long.bin",
            "series": "SERIES"
            "pmid": "29.0.103",
            "indom": "29.2",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "like sample.bin but type 32",
            "text-help": "like sample.bin but type 32"
        }
    ]
}
Series checked (indom)
== metric prefix ==
{
    "context": "CONTEXT"
    "metrics": [
        {
            "name": "sample.long.one",
            "series": "SERIES"
            "pmid": "29.0.10",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "1 as a 32-bit integer",
            "text-help": "The sample.long.* metrics provide a group of 32-bit integer metrics\u000Asome with fixed values and one with a value that can be changed via\u000Apmstore(1).\u000A\u000AThis one has the constant value 1."
        },
        {
            "name": "sample.long.ten",
            "series": "SERIES"
            "pmid": "29.0.11",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "10 as a 32-bit integer",
            "text-help": "10 as a 32-bit integer"
        },
        {
            "name": "sample.long.hundred",
            "series": "SERIES"
            "pmid": "29.0.12",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "100 as a 32-bit integer",
            "text-help": "100 as a 32-bit integer"
        },
        {
            "name": "sample.long.million",
            "series": "SERIES"
            "pmid": "29.0.13",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "1000000 as a 32-bit integer",
            "text-help": "1000000 as a 32-bit integer"
        },
        {
            "name": "sample.long.write_me",
            "series": "SERIES"
            "pmid": "29.0.14",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "a 32-bit integer that can be modified",
            "text-help": "a 32-bit integer that can be modified"
        },
        {
            "name": "sample.long.bin",
            "series": "SERIES"
            "pmid": "29.0.103",
            "indom": "29.2",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "like sample.bin but type 32",
            "text-help": "like sample.bin but type 32"
        },
        {
            "name": "sample.long.bin_ctr",
            "series": "SERIES"
            "pmid": "29.0.104",
            "indom": "29.2",
            "type": "32",
            "sem": "counter",
            "units": "Kbyte",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "like sample.bin but type 32, SEM_COUNTER and SPACE_KBYTE",
            "text-help": "like sample.bin but type 32, SEM_COUNTER and SPACE_KBYTE"
        }
    ]
}
== bad metric name ==
{
    "context": "CONTEXT"
    "message": "bad.metric traversal failed - Unknown metric name",
    "success": false
}
== good and bad metric names ==
{
    "context": "CONTEXT"
    "metrics": [
        {
            "name": "sample.long.ten",
            "series": "SERIES"
            "pmid": "29.0.11",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "10 as a 32-bit integer",
            "text-help": "10 as a 32-bit integer"
        },
        {
            "name": "bad.metric",
            "message": "Unknown metric name",
            "success": false
        }
    ]
}
== good metric names ==
{
    "context": "CONTEXT"
    "metrics": [
        {
            "name": "sample.long.one",
            "series": "SERIES"
            "pmid": "29.0.10",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "1 as a 32-bit integer",
            "text-help": "The sample.long.* metrics provide a group of 32-bit integer metrics\u000Asome with fixed values and one with a value that can be changed via\u000Apmstore(1).\u000A\u000AThis one has the constant value 1."
        },
        {
            "name": "sample.long.ten",
            "series": "SERIES"
            "pmid": "29.0.11",
            "type": "32",
            "sem": "instant",
            "units": "none",
            "labels": {
                "agent": "sample",
                "cluster": "zero",
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
                "role": "testing"
            },
            "text-oneline": "10 as a 32-bit integer",
            "text-help": "10 as a 32-bit integer"
        }
    ]
}

*****   GET /pmapi/fetch   *****

== fetch by name ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.10",
            "name": "sample.long.one",
            "instances": [
                {
                    "instance": null,
                    "value": 1
                }
            ]
        }
    ]
}
== fetch by names ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.10",
            "name": "sample.long.one",
            "instances": [
                {
                    "instance": null,
                    "value": 1
                }
            ]
        }
    ]
}
== fetch by pmid ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.10",
            "name": "sample.long.one",
            "instances": [
                {
                    "instance": null,
                    "value": 1
                }
            ]
        }
    ]
}
== fetch by pmids ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.10",
            "name": "sample.long.one",
            "instances": [
                {
                    "instance": null,
                    "value": 1
                }
            ]
        },
        {
            "pmid": "29.0.11",
            "name": "sample.long.ten",
            "instances": [
                {
                    "instance": null,
                    "value": 10
                }
            ]
        }
    ]
}
== bad name fetch ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [    ]
}
== bad pmid fetch ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [    ]
}
== some good some bad names fetch ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.10",
            "name": "sample.long.one",
            "instances": [
                {
                    "instance": null,
                    "value": 1
                }
            ]
        }
    ]
}
== some good some bad pmids fetch ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.11",
            "name": "sample.long.ten",
            "instances": [
                {
                    "instance": null,
                    "value": 10
                }
            ]
        }
    ]
}
== fetch string by name ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.31",
            "name": "sample.string.hullo",
            "instances": [
                {
                    "instance": null,
                    "value": "hullo world!"
                }
            ]
        }
    ]
}

*****   GET /pmapi/indom   *****

== instances by name ==
{
    "context": "CONTEXT"
    "indom": "29.2",
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    },
    "text-oneline": "Instance domain \u0022bin\u0022 for sample PMDA",
    "text-help": "Universally 9 instances numbered 100 .. 900 in steps of 100, and named\u000A\u0022bin-100\u0022 .. \u0022bin-900\u0022",
    "instances": [
        {
            "instance": 900,
            "name": "bin-900",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 100,
            "name": "bin-100",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 800,
            "name": "bin-800",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 400,
            "name": "bin-400",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 500,
            "name": "bin-500",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 300,
            "name": "bin-300",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 200,
            "name": "bin-200",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 600,
            "name": "bin-600",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 700,
            "name": "bin-700",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        }
    ]
}
== instances by indom ==
{
    "context": "CONTEXT"
    "indom": "29.2",
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    },
    "text-oneline": "Instance domain \u0022bin\u0022 for sample PMDA",
    "text-help": "Universally 9 instances numbered 100 .. 900 in steps of 100, and named\u000A\u0022bin-100\u0022 .. \u0022bin-900\u0022",
    "instances": [
        {
            "instance": 900,
            "name": "bin-900",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 100,
            "name": "bin-100",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 800,
            "name": "bin-800",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 400,
            "name": "bin-400",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 500,
            "name": "bin-500",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 300,
            "name": "bin-300",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 200,
            "name": "bin-200",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 600,
            "name": "bin-600",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 700,
            "name": "bin-700",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        }
    ]
}
== bad indom name parameter ==
{
    "context": "CONTEXT"
    "message": "no.such.metric - failed to lookup metric",
    "success": false
}
== bad indom parameter ==
{
    "context": "CONTEXT"
    "indom": "0.0",
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    },
    "instances": [    ]
}
== no indom parameters ==
<html>
<head><title>400 Bad Request</title></head>
<body>
<h1>400 Bad Request</h1>
<p><b>webapi servlet</b>: failed to process URL</p><hr>
<p><small><i>pmproxy/VERSION</i></small></p>
</body>
</html>
== individual instances ==
{
    "context": "CONTEXT"
    "indom": "29.2",
    "labels": {
        "domainname": "DOMAINNAME"
        "hostname": "HOSTNAME"
    },
    "text-oneline": "Instance domain \u0022bin\u0022 for sample PMDA",
    "text-help": "Universally 9 instances numbered 100 .. 900 in steps of 100, and named\u000A\u0022bin-100\u0022 .. \u0022bin-900\u0022",
    "instances": [
        {
            "instance": 100,
            "name": "bin-100",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        },
        {
            "instance": 200,
            "name": "bin-200",
            "labels": {
                "domainname": "DOMAINNAME"
                "hostname": "HOSTNAME"
            }
        }
    ]
}

*****   GET /pmapi/children   *****

== PMNS children of a nonleaf node ==
{
    "context": "CONTEXT"
    "name": "sample.dynamic",
    "leaf": [
        "counter",
        "discrete",
        "instant"
    ],
    "nonleaf": [
        "meta"
    ]
}
== PMNS children of a leaf node ==
{
    "context": "CONTEXT"
    "name": "sample.long.one",
    "leaf": [    ],
    "nonleaf": [    ]
}
== PMNS children of non-existent node ==
{
    "context": "CONTEXT"
    "message": "child traversal failed - Unknown metric name",
    "success": false
}

*****   GET /pmapi/profile   *****

== add all sample.colour instances ==
{
    "context": "CONTEXT"
    "success": true
}
== del instances by name ==
{
    "context": "CONTEXT"
    "success": true
}
== check restricted context profile ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.5",
            "name": "sample.dupnames.four.colour",
            "instances": [
                {
                    "instance": 2,
                    "value": VALUE
                }
            ]
        },
        {
            "pmid": "29.0.5",
            "name": "sample.colour",
            "instances": [
                {
                    "instance": 2,
                    "value": VALUE
                }
            ]
        }
    ]
}
== add all instances ==
{
    "context": "CONTEXT"
    "success": true
}
== check unrestricted context profile ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.5",
            "name": "sample.dupnames.four.colour",
            "instances": [
                {
                    "instance": 2,
                    "value": VALUE
                },
                {
                    "instance": 0,
                    "value": VALUE
                },
                {
                    "instance": 1,
                    "value": VALUE
                }
            ]
        },
        {
            "pmid": "29.0.5",
            "name": "sample.colour",
            "instances": [
                {
                    "instance": 2,
                    "value": VALUE
                },
                {
                    "instance": 0,
                    "value": VALUE
                },
                {
                    "instance": 1,
                    "value": VALUE
                }
            ]
        }
    ]
}
== add specific instance ==
{
    "context": "CONTEXT"
    "success": true
}
== del all instances ==
{
    "context": "CONTEXT"
    "success": true
}
== add instances by name ==
{
    "context": "CONTEXT"
    "success": true
}
== del specific instance ==
{
    "context": "CONTEXT"
    "success": true
}

*****   GET /pmapi/store   *****

== store value by name ==
{
    "context": "CONTEXT"
    "success": true
}
== check stored value by name ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.14",
            "name": "sample.long.write_me",
            "instances": [
                {
                    "instance": null,
                    "value": 42
                }
            ]
        }
    ]
}
== store value by pmid ==
{
    "context": "CONTEXT"
    "success": true
}
== check stored value by pmid ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.14",
            "name": "sample.long.write_me",
            "instances": [
                {
                    "instance": null,
                    "value": 2
                }
            ]
        }
    ]
}
== store by POST ==
{
    "context": "CONTEXT"
    "success": true
}
== check POST stored value by name ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "29.0.14",
            "name": "sample.long.write_me",
            "instances": [
                {
                    "instance": null,
                    "value": 24
                }
            ]
        }
    ]
}
== instance store by name and iname ==
{
    "context": "CONTEXT"
    "success": true
}
== instance store by name and instance ID ==
{
    "context": "CONTEXT"
    "success": true
}
== store to invalid metric name ==
{
    "context": "CONTEXT"
    "message": "no.such.metric - failed to lookup metric",
    "success": false
}

*****   GET /metrics   *****

== scrape one metric ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
== scrape two metrics ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
# PCP5 sample.long.ten 29.0.11 32 PM_INDOM_NULL instant none
# HELP sample_long_ten 10 as a 32-bit integer
# TYPE sample_long_ten gauge
sample_long_ten{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 10
== scrape bad metric name ==
{
    "context": "CONTEXT"
    "message": "'no.such.metric' - Unknown metric name",
    "success": false
}
== scrape one metric tree ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
# PCP5 sample.long.ten 29.0.11 32 PM_INDOM_NULL instant none
# HELP sample_long_ten 10 as a 32-bit integer
# TYPE sample_long_ten gauge
sample_long_ten{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 10
# PCP5 sample.long.hundred 29.0.12 32 PM_INDOM_NULL instant none
# HELP sample_long_hundred 100 as a 32-bit integer
# TYPE sample_long_hundred gauge
sample_long_hundred{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 100
# PCP5 sample.long.million 29.0.13 32 PM_INDOM_NULL instant none
# HELP sample_long_million 1000000 as a 32-bit integer
# TYPE sample_long_million gauge
sample_long_million{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1000000
# PCP5 sample.long.write_me 29.0.14 32 PM_INDOM_NULL instant none
# HELP sample_long_write_me a 32-bit integer that can be modified
# TYPE sample_long_write_me gauge
sample_long_write_me{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID",changed="true"} 24
# PCP5 sample.dupnames.five.long_bin 29.0.103 32 29.2 instant none
# HELP sample_dupnames_five_long_bin like sample.bin but type 32
# TYPE sample_dupnames_five_long_bin gauge
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-100",instid="100",domainname="DOMAINNAME",machineid="MACHINEID",bin="100"} 100
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-200",instid="200",domainname="DOMAINNAME",machineid="MACHINEID",bin="200"} 200
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-300",instid="300",domainname="DOMAINNAME",machineid="MACHINEID",bin="300"} 300
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-400",instid="400",domainname="DOMAINNAME",machineid="MACHINEID",bin="400"} 400
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-500",instid="500",domainname="DOMAINNAME",machineid="MACHINEID",bin="500"} 500
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-600",instid="600",domainname="DOMAINNAME",machineid="MACHINEID",bin="600"} 600
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-700",instid="700",domainname="DOMAINNAME",machineid="MACHINEID",bin="700"} 700
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-800",instid="800",domainname="DOMAINNAME",machineid="MACHINEID",bin="800"} 800
sample_dupnames_five_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-900",instid="900",domainname="DOMAINNAME",machineid="MACHINEID",bin="900"} 900
# PCP5 sample.long.bin 29.0.103 32 29.2 instant none
# HELP sample_long_bin like sample.bin but type 32
# TYPE sample_long_bin gauge
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-100",instid="100",domainname="DOMAINNAME",machineid="MACHINEID",bin="100"} 100
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-200",instid="200",domainname="DOMAINNAME",machineid="MACHINEID",bin="200"} 200
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-300",instid="300",domainname="DOMAINNAME",machineid="MACHINEID",bin="300"} 300
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-400",instid="400",domainname="DOMAINNAME",machineid="MACHINEID",bin="400"} 400
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-500",instid="500",domainname="DOMAINNAME",machineid="MACHINEID",bin="500"} 500
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-600",instid="600",domainname="DOMAINNAME",machineid="MACHINEID",bin="600"} 600
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-700",instid="700",domainname="DOMAINNAME",machineid="MACHINEID",bin="700"} 700
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-800",instid="800",domainname="DOMAINNAME",machineid="MACHINEID",bin="800"} 800
sample_long_bin{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-900",instid="900",domainname="DOMAINNAME",machineid="MACHINEID",bin="900"} 900
# PCP5 sample.long.bin_ctr 29.0.104 32 29.2 counter Kbyte
# HELP sample_long_bin_ctr like sample.bin but type 32, SEM_COUNTER and SPACE_KBYTE
# TYPE sample_long_bin_ctr counter
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-100",instid="100",domainname="DOMAINNAME",machineid="MACHINEID",bin="100"} 100
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-200",instid="200",domainname="DOMAINNAME",machineid="MACHINEID",bin="200"} 200
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-300",instid="300",domainname="DOMAINNAME",machineid="MACHINEID",bin="300"} 300
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-400",instid="400",domainname="DOMAINNAME",machineid="MACHINEID",bin="400"} 400
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-500",instid="500",domainname="DOMAINNAME",machineid="MACHINEID",bin="500"} 500
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-600",instid="600",domainname="DOMAINNAME",machineid="MACHINEID",bin="600"} 600
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-700",instid="700",domainname="DOMAINNAME",machineid="MACHINEID",bin="700"} 700
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-800",instid="800",domainname="DOMAINNAME",machineid="MACHINEID",bin="800"} 800
sample_long_bin_ctr{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",instname="bin-900",instid="900",domainname="DOMAINNAME",machineid="MACHINEID",bin="900"} 900
== scrape metric instances ==
# PCP5 sample.dupnames.four.colour 29.0.5 32 29.1 instant none
# HELP sample_dupnames_four_colour Metrics with a "saw-tooth" trend over time
# TYPE sample_dupnames_four_colour gauge
sample_dupnames_four_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="red",instid="0",domainname="DOMAINNAME",machineid="MACHINEID"} 143
sample_dupnames_four_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="green",instid="1",domainname="DOMAINNAME",machineid="MACHINEID"} 244
sample_dupnames_four_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="blue",instid="2",domainname="DOMAINNAME",machineid="MACHINEID"} 345
# PCP5 sample.colour 29.0.5 32 29.1 instant none
# HELP sample_colour Metrics with a "saw-tooth" trend over time
# TYPE sample_colour gauge
sample_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="red",instid="0",domainname="DOMAINNAME",machineid="MACHINEID"} 143
sample_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="green",instid="1",domainname="DOMAINNAME",machineid="MACHINEID"} 244
sample_colour{role="testing",agent="sample",model="RGB",cluster="zero",hostname="HOSTNAME",instname="blue",instid="2",domainname="DOMAINNAME",machineid="MACHINEID"} 345
== small curl compression command ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
== large curl compression command ==
# PCP5 sample.control 29.0.0 32 PM_INDOM_NULL instant none
# HELP sample_control A control variable for the "sample" PMDA
# TYPE sample_control gauge
sample_control{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 0
# PCP5 sample.dupnames.pid_daemon 29.0.1 u32 PM_INDOM_NULL instant none
# HELP sample_dupnames_pid_daemon Process id of PMDA daemon
# TYPE sample_dupnames_pid_daemon gauge
== scrape all metrics ==
done full scrape
== check pmproxy is running ==
pmproxy check passed
== good filter globbing ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
== good filter exact match ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
== good filter regex ==
# PCP5 sample.long.one 29.0.10 32 PM_INDOM_NULL instant none
# HELP sample_long_one 1 as a 32-bit integer
# TYPE sample_long_one gauge
sample_long_one{role="testing",agent="sample",hostname="HOSTNAME",cluster="zero",domainname="DOMAINNAME",machineid="MACHINEID"} 1
== bad filter match param ==
{"context":CONTEXT,"message":"dummy - invalid 'match' parameter value","success":false}

*****   GET and POST /pmapi/derive   *****

== derive by GET ==
{
    "context": "CONTEXT"
    "success": true
}
== check derived metric value ==
{
    "context": "CONTEXT"
    "timestamp": TIME,
    "values": [
        {
            "pmid": "511.2047.1023",
            "name": "qa.metric",
            "instances": [
                {
                    "instance": null,
                    "value": 2
                }
            ]
        }
    ]
}
== derive by POST ==
{
    "context": "CONTEXT"
    "success": true
}
== missing derive expr parameter ==
{
    "context": "CONTEXT"
    "message": "invalid derive parameters",
    "success": false
}
== missing derive name parameter ==
{
    "context": "CONTEXT"
    "message": "failed to parse derived metric \u0022hinv.ncpu*42\u0022 on line 0 - incomplete expression\u000A",
    "success": false
}

*****   Generic errors - no handler, bad URLs   *****

== no servlet ==
<html>
<head><title>400 Bad Request</title></head>
<body>
<h1>400 Bad Request</h1>
<p><b>unknown servlet</b>: no handler for URL</p><hr>
<p><small><i>pmproxy/VERSION</i></small></p>
</body>
</html>
== no command ==
<html>
<head><title>400 Bad Request</title></head>
<body>
<h1>400 Bad Request</h1>
<p><b>unknown servlet</b>: no handler for URL</p><hr>
<p><small><i>pmproxy/VERSION</i></small></p>
</body>
</html>
== bad command ==
<html>
<head><title>400 Bad Request</title></head>
<body>
<h1>400 Bad Request</h1>
<p><b>unknown servlet</b>: no handler for URL</p><hr>
<p><small><i>pmproxy/VERSION</i></small></p>
</body>
</html>
== bad servlet ==
<html>
<head><title>400 Bad Request</title></head>
<body>
<h1>400 Bad Request</h1>
<p><b>unknown servlet</b>: no handler for URL</p><hr>
<p><small><i>pmproxy/VERSION</i></small></p>
</body>
</html>
