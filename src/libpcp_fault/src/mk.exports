#!/bin/sh
#
# Make exports for libpcp_fault from the exports file for libpcp
#

rm -f exports
if [ ! -f ../../libpcp/src/exports ]
then
    echo "mk.exports: Missing: ../../libpcp/src/exports"
    exit 1
fi

awk <../../libpcp/src/exports >exports '
BEGIN			{ onetrip = 1 }
			{ print }
onetrip == 1 && $1 == "global:"	{ print "    __pmFault_malloc;"
		  print "    __pmFault_realloc;"
		  print "    __pmFault_strdup;"
		  onetrip = 0;
		}'
